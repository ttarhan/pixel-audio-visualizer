apiVersion: v1
kind: PersistentVolume
metadata:
  name: visualizer-dev-pv
spec:
  capacity:
    storage: 1Mi
  accessModes:
    - ReadWriteMany
  nfs:
    server: nas1.local
    path: /volume1/k8s-volumes/static/visualizer-dev-volume
  mountOptions:
    - defaults
    - noatime
    - vers=3
    - proto=tcp
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: visualizer-dev-pvc
spec:
  accessModes:
    - ReadWriteMany
  storageClassName: ""
  resources:
    requests:
      storage: 1Mi
  volumeName: visualizer-dev-pv
---
apiVersion: v1
kind: Pod
metadata:
  name: visualizer-dev
spec:
  containers:
    - name: dev
      image: ubuntu:24.04
      command:
        - /bin/sleep
        - infinity
      volumeMounts:
        - name: nfs
          mountPath: /root
      resources:
        limits:
          device.k8.ttar.org/audio: "1"
          device.k8.ttar.org/usbsound: "1"
      securityContext:
        capabilities:
          add: ["SYS_NICE"]
  terminationGracePeriodSeconds: 0
  volumes:
    - name: nfs
      persistentVolumeClaim:
        claimName: visualizer-dev-pvc